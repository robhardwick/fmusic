language: cpp

os:
    - linux
    - osx

osx_image: xcode61

compiler:
    - gcc
    - clang

install:
    # Install dependencies
    - if [ "$TRAVIS_OS_NAME" == "linux" ]; then ./scripts/deps-ubuntu.sh; fi
    - if [ "$TRAVIS_OS_NAME" == "osx" ]; then ./scripts/deps-osx.sh; fi

    # Start dummy MIDI server
    - if [ "$TRAVIS_OS_NAME" == "linux" ]; then jackd -d dummy > /dev/null & fi

script:
    # Build and run tests
    - ./scripts/build.sh test
